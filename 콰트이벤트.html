<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì½°íŠ¸ ì—°ë§/ì—°ì´ˆ í”„ë¡œëª¨ì…˜ ì „ëµ + AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Markdown Parser for AI responses -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f5f5f4; color: #44403c; }

        .chart-container {
            position: relative; width: 100%; height: 200px;
        }
        
        /* Navigation Styles */
        .nav-btn { transition: all 0.2s; border-left: 4px solid transparent; }
        .nav-active { background-color: white; font-weight: 700; border-left-color: #f97316; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        
        /* Animation */
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .tag { display: inline-block; padding: 2px 8px; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; }
        .tag-red { background-color: #fee2e2; color: #991b1b; }
        .tag-blue { background-color: #dbeafe; color: #1e40af; }
        .tag-purple { background-color: #f3e8ff; color: #6b21a8; }
        .tag-gray { background-color: #f3f4f6; color: #4b5563; }
        .tag-green { background-color: #dcfce7; color: #166534; }
        .tag-orange { background-color: #ffedd5; color: #9a3412; }

        /* Timeline Styles */
        .timeline-item { position: relative; padding-left: 1.5rem; padding-bottom: 1.5rem; border-left: 2px solid #e5e7eb; }
        .timeline-item:last-child { border-left: none; padding-bottom: 0; }
        .timeline-dot { position: absolute; left: -0.43rem; top: 0.25rem; width: 0.8rem; height: 0.8rem; border-radius: 50%; background-color: white; border: 2px solid #d1d5db; }
        .timeline-dot.active { border-color: #f97316; background-color: #f97316; }
        
        /* Checklist Item Style */
        .check-item { display: flex; align-items: start; gap: 0.75rem; padding: 0.5rem; border-radius: 0.5rem; transition: background-color 0.2s; }
        .check-item:hover { background-color: #f9fafb; }
        .check-input { margin-top: 0.25rem; width: 1rem; height: 1rem; accent-color: #f97316; cursor: pointer; }
        .check-label { font-size: 0.875rem; color: #4b5563; cursor: pointer; }

        /* Card Hover Effect for December Benefits */
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* AI Loading Animation */
        .dot-flashing {
            position: relative;
            width: 6px;
            height: 6px;
            border-radius: 5px;
            background-color: #f97316;
            color: #f97316;
            animation: dot-flashing 1s infinite linear alternate;
            animation-delay: 0.5s;
        }
        .dot-flashing::before, .dot-flashing::after {
            content: "";
            display: inline-block;
            position: absolute;
            top: 0;
        }
        .dot-flashing::before {
            left: -10px;
            width: 6px;
            height: 6px;
            border-radius: 5px;
            background-color: #f97316;
            color: #f97316;
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 0s;
        }
        .dot-flashing::after {
            left: 10px;
            width: 6px;
            height: 6px;
            border-radius: 5px;
            background-color: #f97316;
            color: #f97316;
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 1s;
        }
        @keyframes dot-flashing {
            0% { background-color: #f97316; }
            50%, 100% { background-color: #fed7aa; }
        }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden">

    <!-- Header -->
    <header class="bg-white border-b border-stone-200 p-4 flex justify-between items-center z-10 shadow-sm">
        <div class="flex items-center gap-2">
            <h1 class="text-xl font-bold text-stone-800">ğŸ”® ì½°íŠ¸ ì—°ë§/ì—°ì´ˆ í”„ë¡œëª¨ì…˜ ê¸°íš</h1>
        </div>
        <div class="flex items-center gap-3">
            <div class="text-xs md:text-sm text-stone-500 bg-stone-100 px-3 py-1 rounded-full">
                ê¸°íš ë§ˆê°: 12ì›” 13ì¼
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar -->
        <nav class="w-64 bg-stone-100 border-r border-stone-200 hidden md:flex flex-col p-4 space-y-2 overflow-y-auto">
            <div class="text-xs font-bold text-stone-400 mb-2 px-2">ì „ì²´ ëª©í‘œ</div>
            <button onclick="showSection('overview')" id="nav-overview" class="nav-btn w-full text-left px-4 py-3 rounded text-stone-600 hover:bg-white nav-active">
                ğŸ“Š ëª©í‘œ ë° ë°©í–¥ì„±
            </button>
            
            <div class="mt-6 text-xs font-bold text-stone-400 mb-2 px-2 pt-4 border-t border-stone-200">ê¸°ê°„ë³„ ì „ëµ</div>
            <button onclick="showSection('december')" id="nav-december" class="nav-btn w-full text-left px-4 py-3 rounded text-stone-600 hover:bg-white">
                ğŸ”¥ 12ì›”: ì–¼ë¦¬ë²„ë“œ
            </button>
            <button onclick="showSection('january')" id="nav-january" class="nav-btn w-full text-left px-4 py-3 rounded text-stone-600 hover:bg-white">
                ğŸŒ… 1ì›”: ì„±ê³µë°˜
            </button>

            <div class="mt-6 text-xs font-bold text-stone-400 mb-2 px-2 pt-4 border-t border-stone-200">ê´€ë¦¬</div>
            <button onclick="showSection('todo')" id="nav-todo" class="nav-btn w-full text-left px-4 py-3 rounded text-stone-600 hover:bg-white">
                âœ… ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸
            </button>

            <!-- New AI Section -->
            <div class="mt-6 text-xs font-bold text-stone-400 mb-2 px-2 pt-4 border-t border-stone-200">AI ë„êµ¬</div>
            <button onclick="showSection('ai-assistant')" id="nav-ai-assistant" class="nav-btn w-full text-left px-4 py-3 rounded text-purple-700 bg-purple-50 hover:bg-purple-100 border-l-purple-500">
                âœ¨ AI í¬ë¦¬ì—ì´í‹°ë¸Œ
            </button>
        </nav>

        <!-- Mobile Nav -->
        <nav class="md:hidden fixed bottom-0 w-full bg-white border-t flex justify-around p-2 z-50 text-xs">
            <button onclick="showSection('overview')" class="p-2">ğŸ“Š ëª©í‘œ</button>
            <button onclick="showSection('december')" class="p-2 text-red-600 font-bold">ğŸ”¥ 12ì›”</button>
            <button onclick="showSection('january')" class="p-2 text-blue-600 font-bold">ğŸŒ… 1ì›”</button>
            <button onclick="showSection('ai-assistant')" class="p-2 text-purple-600 font-bold">âœ¨ AI</button>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto p-4 md:p-8 bg-stone-50 pb-20 md:pb-8">
            
            <!-- 1. OVERVIEW -->
            <section id="overview" class="content-section fade-in">
                <h2 class="text-2xl font-bold mb-6">ëª©í‘œ (Goal) & ë°°ê²½</h2>
                
                <!-- Goal Cards -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-stone-800">
                        <div class="text-sm text-stone-500">ì´ ê³µí—Œì´ìµ ëª©í‘œ</div>
                        <div class="text-2xl font-bold text-stone-800">3ì–µ ì› ë‹¬ì„±</div>
                        <p class="text-xs text-stone-400 mt-2">ì—°ê°„ ê´‘ê³ ë¹„/ë§¤ì¶œ ìµœëŒ€ í”¼í¬ ì‹œì¦Œ ëŒ€ë¹„</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-red-500">
                        <div class="text-sm text-stone-500">ë°œë ˆ (Target)</div>
                        <div class="text-xl font-bold">2ì–µ ì›</div>
                        <p class="text-xs text-red-500 mt-2 font-bold">CPA 10ë§Œì› ëª©í‘œ</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-blue-500">
                        <div class="text-sm text-stone-500">í•„ë¼í…ŒìŠ¤ (Target)</div>
                        <div class="text-xl font-bold">1ì–µ ì›</div>
                        <p class="text-xs text-blue-500 mt-2 font-bold">CPA 15ë§Œì› ëª©í‘œ</p>
                    </div>
                </div>

                <!-- Strategy Direction -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="font-bold text-lg mb-4">ğŸ“ˆ í”„ë¡œëª¨ì…˜ ë°©í–¥ì„±</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-red-50 p-4 rounded-lg">
                            <div class="font-bold text-red-800 mb-2">12ì›” ì—°ë§ : í• ì¸ + ë¡œë˜ = ì–¼ë¦¬ë²„ë“œ ì»¨ì…‰</div>
                            <p class="text-sm text-stone-700">
                                "ì˜¬í•´ ë§ˆì§€ë§‰ í˜œíƒ, ìµœì €ê°€"<br>
                                (12ì›” 3~5ì£¼ì°¨ ìš´ì˜)
                            </p>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="font-bold text-blue-800 mb-2">1ì›” ì—°ì´ˆ: í˜œíƒ+ì¦ì • = ì´ˆê°•ë ¥ ë‹¤ì´ì–´íŠ¸</div>
                            <p class="text-sm text-stone-700">
                                "ë‹¤ì´ì–´íŠ¸ ê¼­ ì„±ê³µí•  ìˆ˜ ìˆë„ë¡ ë‹¤ ì¤€ë¹„í–ˆì–´"<br>
                                <strong>ì‹ ë…„í˜œíƒ ì„±ê³µë°˜ ëª¨ì§‘</strong> (1ì›” ~ ì¶”ì„ ì „)
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 2. DECEMBER (ì—°ë§) -->
            <section id="december" class="content-section hidden fade-in">
                <div class="flex items-center gap-3 mb-6">
                    <span class="text-3xl">ğŸ”¥</span>
                    <div>
                        <h2 class="text-2xl font-bold text-red-700">12ì›” ì—°ë§ ìº í˜ì¸</h2>
                        <p class="text-sm text-stone-500">ì»¨ì…‰: í• ì¸ + ë¡œë˜ = ì–¼ë¦¬ë²„ë“œ (ì˜¬í•´ ë§ˆì§€ë§‰ í˜œíƒ)</p>
                    </div>
                </div>

                <!-- Benefits (Card Grid Layout) -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                    
                    <!-- Benefit 1: Discount -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-xl font-bold text-orange-600">í˜œíƒ 1. ì—°ë§ í•œì • 52% í• ì¸</h3>
                                <p class="text-sm text-stone-500 mt-1">ì¶”ì„ í”„ë¡œëª¨ì…˜ ì„±ê³µ ê³µì‹ ê³„ìŠ¹</p>
                            </div>
                            <span class="text-3xl">ğŸ·ï¸</span>
                        </div>
                        <div class="chart-container">
                            <canvas id="priceChart"></canvas>
                        </div>
                        <p class="text-xs text-stone-400 mt-2 text-center bg-stone-50 p-2 rounded">ì›ê°€ ëŒ€ë¹„ ì••ë„ì ì¸ ê°€ê²© ìš°ìœ„ë¥¼ ì‹œê°ì ìœ¼ë¡œ ê°•ì¡°</p>
                    </div>

                    <!-- Benefit 2: Lotto -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 card-hover relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-yellow-100 rounded-full -mr-16 -mt-16 opacity-30 transition-transform group-hover:scale-110"></div>
                        <div class="flex justify-between items-start mb-4 relative z-10">
                            <div>
                                <h3 class="text-xl font-bold text-stone-800">í˜œíƒ 2. ë‹¤ì´ì–´íŠ¸ ë¡œë˜</h3>
                                <p class="text-sm text-stone-500 mt-1">ì‚´ ë¹¼ê³  500ë§Œì› ë°›ì! ëŒ€ë°• ì‹¬ë¦¬ ìê·¹</p>
                            </div>
                            <span class="text-3xl">ğŸ°</span>
                        </div>
                        
                        <!-- Interactive Lotto Sim -->
                        <div class="bg-stone-50 rounded-lg p-6 text-center border border-stone-200 shadow-inner">
                            <div class="text-xs text-stone-500 mb-2">ì‚¬ìš©ì ê²½í—˜ ì‹œë®¬ë ˆì´ì…˜</div>
                            <div id="lotto-display" class="text-4xl font-mono font-bold text-stone-800 mb-6 tracking-widest bg-white inline-block px-6 py-2 rounded shadow-sm">00 00 00</div>
                            <br>
                            <button onclick="playLotto()" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-full transition-all transform active:scale-95 shadow-md hover:shadow-lg">
                                ë¡œë˜ ì¶”ì²¨ ì²´í—˜í•˜ê¸°
                            </button>
                            <p id="lotto-result" class="mt-6 text-sm font-medium h-6 text-stone-600 transition-opacity duration-300">ë²„íŠ¼ì„ ëˆŒëŸ¬ ê³ ê° ê²½í—˜ì„ í™•ì¸í•˜ì„¸ìš”!</p>
                        </div>
                        <div class="mt-4 p-3 bg-red-50 rounded text-xs text-red-600 border border-red-100 flex items-start gap-2">
                            <span>âš ï¸</span> 
                            <div><strong>Check Point:</strong> 'ë¡œë˜' ë‹¨ì–´ ì‚¬ìš© ë° ì‚¬í–‰ì„± ì¡°ì¥ ê´€ë ¨ ë²•ë¬´ ê²€í†  í•„ìˆ˜ (ëŒ€ì•ˆ: ëŸ­í‚¤ë“œë¡œìš°, ë³µê¶Œ)</div>
                        </div>
                    </div>

                    <!-- Benefit 3: Refund -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-xl font-bold text-emerald-600">í˜œíƒ 3. ê½ ì—†ëŠ” 100% í™˜ê¸‰</h3>
                                <p class="text-sm text-stone-500 mt-1">Risk Zero ì „ëµ: ì†í•´ ë³¼ ê²ƒì´ ì—†ë‹¤ëŠ” í™•ì‹ </p>
                            </div>
                            <span class="text-3xl">ğŸ’¸</span>
                        </div>
                        <div class="flex flex-col gap-3">
                            <div class="flex items-center p-4 bg-emerald-50 rounded-lg border border-emerald-100">
                                <span class="text-3xl mr-4">ğŸ˜Š</span>
                                <div>
                                    <div class="font-bold text-emerald-800">ë‹¤ì´ì–´íŠ¸ ì„±ê³µ ì‹œ</div>
                                    <div class="text-sm text-emerald-600">ìˆ˜ê°•ë£Œ + ê¸°ê¸°ê°’ 100% í˜„ê¸ˆ í™˜ê¸‰</div>
                                </div>
                            </div>
                            <div class="flex items-center p-4 bg-stone-100 rounded-lg border border-stone-200">
                                <span class="text-3xl mr-4">ğŸ˜¢</span>
                                <div>
                                    <div class="font-bold text-stone-700">ë‹¤ì´ì–´íŠ¸ ì‹¤íŒ¨ ì‹œ</div>
                                    <div class="text-sm text-stone-500">ê·¸ë˜ë„ 100% í™˜ê¸‰ (ìš´ë™ë§Œ ì¸ì¦í•˜ì„¸ìš”!)</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Benefit 4: Full Package -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100 card-hover">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-xl font-bold text-stone-800">í˜œíƒ 4. í’€ íŒ¨í‚¤ì§€ ì¦ì •</h3>
                                <p class="text-sm text-stone-500 mt-1">ë“±ë¡ ì¦‰ì‹œ 3ì¢… ì„¸íŠ¸ ë¬´ë£Œ ì¦ì •</p>
                            </div>
                            <span class="text-3xl">ğŸ§˜â€â™€ï¸</span>
                        </div>
                        <div class="grid grid-cols-3 gap-4 text-center h-full items-center pb-4">
                            <div class="p-4 bg-stone-50 rounded-lg border border-stone-200 flex flex-col items-center justify-center h-32 hover:bg-stone-100 transition-colors">
                                <div class="text-4xl mb-2">ğŸªœ</div>
                                <div class="text-sm font-medium text-stone-700">ê¸°êµ¬ A</div>
                            </div>
                            <div class="p-4 bg-stone-50 rounded-lg border border-stone-200 flex flex-col items-center justify-center h-32 hover:bg-stone-100 transition-colors">
                                <div class="text-4xl mb-2">ğŸ§±</div>
                                <div class="text-sm font-medium text-stone-700">ê¸°êµ¬ B</div>
                            </div>
                            <div class="p-4 bg-stone-50 rounded-lg border border-stone-200 flex flex-col items-center justify-center h-32 hover:bg-stone-100 transition-colors">
                                <div class="text-4xl mb-2">ğŸ§´</div>
                                <div class="text-sm font-medium text-stone-700">ì „ìš© ë§¤íŠ¸</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Suggestion Card (Moved Below Benefits) -->
                <div class="bg-orange-50 border border-orange-200 rounded-xl p-5 shadow-sm mb-6">
                    <div class="flex items-start gap-3">
                        <div class="text-2xl">ğŸ’¡</div>
                        <div class="flex-1">
                            <h3 class="font-bold text-orange-800 mb-1">ì¶”ê°€ ì•¡ì…˜ ì œì•ˆ: í•„ë¼í…ŒìŠ¤ ì‚¬ì „ ì˜ˆì•½</h3>
                            <p class="text-sm text-stone-700 mb-2">
                                <strong>"ìµœì €ê°€ì¼ ë•Œ ë¯¸ë¦¬ êµ¬ë§¤í•˜ê³ , ìš´ë™ ì‹œì‘ì€ 1ì›” 1ì¼ë¶€í„°!"</strong>
                            </p>
                            <div class="text-xs text-stone-600 bg-white p-3 rounded-lg border border-orange-100">
                                <p class="mb-1"><span class="font-bold text-orange-600">Psychology:</span> ì§€ê¸ˆ ì•ˆ ì‚¬ë©´ ì†í•´ + ë‹¹ì¥ ìš´ë™ ë¶€ë‹´ í•´ì†Œ</p>
                                <p><span class="font-bold text-orange-600">Action:</span> ê²°ì œ ì‹œì‘ì¼ ì§€ì • ê¸°ëŠ¥ êµ¬í˜„</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 12ì›” Ad Creatives Filter (Interactive) -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 mb-6">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                        <h3 class="font-bold text-lg flex items-center gap-2">
                            <span>ğŸ“¢</span> 12ì›” ê´‘ê³  ì†Œì¬ ì•„ì´ë””ì–´
                        </h3>
                        <div class="flex flex-wrap gap-2 text-xs">
                            <button onclick="filterAds('december', 'all')" class="december-filter-btn active px-4 py-2 bg-stone-200 text-stone-700 rounded-full hover:bg-stone-300 transition-colors font-medium" data-filter="all">All</button>
                            <button onclick="filterAds('december', 'discount')" class="december-filter-btn px-4 py-2 bg-white border border-orange-200 text-orange-700 rounded-full hover:bg-orange-50 transition-colors" data-filter="discount">í• ì¸</button>
                            <button onclick="filterAds('december', 'lotto')" class="december-filter-btn px-4 py-2 bg-white border border-yellow-200 text-yellow-700 rounded-full hover:bg-yellow-50 transition-colors" data-filter="lotto">ë¡œë˜/ë³´ìƒ</button>
                            <button onclick="filterAds('december', 'refund')" class="december-filter-btn px-4 py-2 bg-white border border-emerald-200 text-emerald-700 rounded-full hover:bg-emerald-50 transition-colors" data-filter="refund">í™˜ê¸‰</button>
                            <button onclick="filterAds('december', 'timing')" class="december-filter-btn px-4 py-2 bg-white border border-blue-200 text-blue-700 rounded-full hover:bg-blue-50 transition-colors" data-filter="timing">ì‹œê¸°</button>
                        </div>
                    </div>
                    <div id="ad-grid-december" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Ads injected by JS -->
                    </div>
                </div>

                <!-- Expected Tasks Timeline -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="font-bold text-lg mb-4 border-b pb-2">ğŸ—“ï¸ 12ì›” ì˜ˆìƒ ì¼ê° íƒ€ì„ë¼ì¸</h3>
                    <div class="mt-2">
                        <div class="timeline-item">
                            <div class="timeline-dot active"></div>
                            <h4 class="text-sm font-bold text-stone-800">ê¸°íš (Planning)</h4>
                            <p class="text-xs text-stone-500 mb-2">~ 12ì›” 2ì£¼ì°¨</p>
                            <ul class="text-xs text-stone-600 list-disc list-inside bg-stone-50 p-2 rounded">
                                <li>ì—°ë§/ì—°ì´ˆ ëœë”© í˜ì´ì§€ ê¸°íš</li>
                                <li><strong>ì‚¬ì „ ì˜ˆì•½ í”„ë¡œëª¨ì…˜ êµ¬ì¡° ì„¤ê³„</strong></li>
                            </ul>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot active"></div>
                            <h4 class="text-sm font-bold text-stone-800">ì œì‘ (Production)</h4>
                            <p class="text-xs text-stone-500 mb-2">~ 12ì›” 3ì£¼ì°¨</p>
                            <ul class="text-xs text-stone-600 list-disc list-inside bg-stone-50 p-2 rounded space-y-1">
                                <li><strong>ì—°ë§ ëœë”© ë””ìì¸/ê°œë°œ</strong></li>
                                <li>ê´‘ê³  ì†Œì¬ ì œì‘ (ìµœì €ê°€, ë¡œë˜, í™˜ê¸‰)</li>
                            </ul>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <h4 class="text-sm font-bold text-stone-800">ìš´ì˜ (Operation)</h4>
                            <p class="text-xs text-stone-500 mb-2">12ì›” 3ì£¼ ~ 5ì£¼ì°¨</p>
                            <ul class="text-xs text-stone-600 list-disc list-inside bg-stone-50 p-2 rounded">
                                <li>ì–¼ë¦¬ë²„ë“œ ìº í˜ì¸ ë¼ì´ë¸Œ</li>
                                <li>ê°€ê²© ì¸ìƒ ì¹´ìš´íŠ¸ë‹¤ìš´ ë…¸ì¶œ</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 3. JANUARY (ì—°ì´ˆ) -->
            <section id="january" class="content-section hidden fade-in">
                <div class="flex items-center gap-3 mb-6">
                    <span class="text-3xl">ğŸŒ…</span>
                    <div>
                        <h2 class="text-2xl font-bold text-blue-700">1ì›” ì‹ ë…„ ìº í˜ì¸</h2>
                        <p class="text-sm text-stone-500">ì»¨ì…‰: í˜œíƒ + ì¦ì • = ì„±ê³µë°˜ (ì‹ ë…„í˜œíƒ ì„±ê³µë°˜ ëª¨ì§‘)</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Benefits (Basic + Premium) -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg mb-4 border-b pb-2">ğŸ’ 1ì›” í˜œíƒ (Full Package)</h3>
                        
                        <!-- Basic Benefits -->
                        <div class="mb-6">
                            <h4 class="text-sm font-bold text-stone-700 mb-2 flex items-center gap-2">
                                <span class="bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs">ê¸°ë³¸ í˜œíƒ (ìœ ì§€)</span>
                            </h4>
                            <div class="space-y-2 bg-stone-50 p-3 rounded-lg border border-stone-100">
                                <div class="flex items-center gap-2 text-sm">
                                    <span class="text-lg">ğŸ°</span> 
                                    <span class="text-stone-600">ë‹¤ì´ì–´íŠ¸ ë¡œë˜ (500ë§Œì›)</span>
                                </div>
                                <div class="flex items-center gap-2 text-sm">
                                    <span class="text-lg">ğŸ’¸</span> 
                                    <span class="text-stone-600">100% í™˜ê¸‰ (ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€)</span>
                                </div>
                                <div class="flex items-center gap-2 text-sm">
                                    <span class="text-lg">ğŸ§˜â€â™€ï¸</span> 
                                    <span class="text-stone-600">í•„ë¼í…ŒìŠ¤ ê¸°êµ¬ 2ì¢… + ë§¤íŠ¸</span>
                                </div>
                            </div>
                        </div>

                        <!-- Premium Benefits -->
                        <div>
                            <h4 class="text-sm font-bold text-stone-700 mb-2 flex items-center gap-2">
                                <span class="bg-purple-100 text-purple-800 px-2 py-0.5 rounded text-xs">í”„ë¦¬ë¯¸ì—„ í˜œíƒ</span>
                            </h4>
                            <div class="space-y-2">
                                <div class="bg-purple-50 p-3 rounded-lg border border-purple-100">
                                    <div class="font-bold text-sm text-stone-800">ğŸ“¦ í”„ë¦¬ë¯¸ì—„ íŒ¨í‚¤ì§€ (30~35ë§Œì›)</div>
                                    <p class="text-xs text-stone-600 mt-1">êµ¬ì„±: ì—ì„¼ì…œ í‚¤íŠ¸ + <strong>í•„ë¼í…ŒìŠ¤ & ë°œë ˆë°”</strong></p>
                                </div>
                                <div class="bg-purple-50 p-3 rounded-lg border border-purple-100">
                                    <div class="font-bold text-sm text-stone-800">ğŸ“š ì €ì†ë…¸í™” ë¹„ë²•ì„œ (PDF)</div>
                                    <p class="text-xs text-stone-600 mt-1">
                                        ìƒˆí•´ 'í•œ ì‚´ ë” ë¨¹ëŠ”' ë‘ë ¤ì›€ ê³µëµ<br>
                                        <span class="text-red-500 font-bold">Action: í”¼ì¹´íŒ€ ë¶ˆê°€ â†’ í¬ëª½ ì„œì¹­(ì™¸ì£¼)</span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 1ì›” Ad Creatives Filter (Interactive) -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                            <h3 class="font-bold text-lg flex items-center gap-2">
                                <span>ğŸ“¢</span> 1ì›” ê´‘ê³  ì†Œì¬ ì•„ì´ë””ì–´
                            </h3>
                            <div class="flex flex-wrap gap-2 text-xs">
                                <button onclick="filterAds('january', 'all')" class="january-filter-btn active px-4 py-2 bg-stone-200 text-stone-700 rounded-full hover:bg-stone-300 transition-colors font-medium" data-filter="all">All</button>
                                <button onclick="filterAds('january', 'newyear')" class="january-filter-btn px-4 py-2 bg-white border border-blue-200 text-blue-700 rounded-full hover:bg-blue-50 transition-colors" data-filter="newyear">ì‹ ë…„/ë‹¤ì§</button>
                                <button onclick="filterAds('january', 'premium')" class="january-filter-btn px-4 py-2 bg-white border border-purple-200 text-purple-700 rounded-full hover:bg-purple-50 transition-colors" data-filter="premium">í”„ë¦¬ë¯¸ì—„</button>
                                <button onclick="filterAds('january', 'collab')" class="january-filter-btn px-4 py-2 bg-white border border-green-200 text-green-700 rounded-full hover:bg-green-50 transition-colors" data-filter="collab">ì œíœ´</button>
                            </div>
                        </div>
                        <div id="ad-grid-january" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- Ads injected by JS -->
                        </div>
                    </div>
                </div>

                <!-- Expected Tasks Timeline -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200 mt-6">
                    <h3 class="font-bold text-lg mb-4 border-b pb-2">ğŸ—“ï¸ 1ì›” ì˜ˆìƒ ì¼ê° íƒ€ì„ë¼ì¸</h3>
                    <div class="mt-2">
                        <div class="timeline-item">
                            <div class="timeline-dot active"></div>
                            <h4 class="text-sm font-bold text-stone-800">ì¤€ë¹„ (Preparation)</h4>
                            <p class="text-xs text-stone-500 mb-2">~ 12ì›” ë§</p>
                            <ul class="text-xs text-stone-600 list-disc list-inside bg-stone-50 p-2 rounded">
                                <li><strong>ì €ì†ë…¸í™” ë¹„ë²•ì„œ: í¬ëª½ ì™¸ì£¼ ì„œì¹­ ë° ì œì‘</strong></li>
                                <li>ì œíœ´ ë¸Œëœë“œ(ë§í•´ë³´ì¹´, ë¦¬ì–¼í´ë˜ìŠ¤) ì œì•ˆ</li>
                            </ul>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <h4 class="text-sm font-bold text-stone-800">ì œì‘ (Production)</h4>
                            <p class="text-xs text-stone-500 mb-2">12ì›” ë§ ~ 1ì›” ì´ˆ</p>
                            <ul class="text-xs text-stone-600 list-disc list-inside bg-stone-50 p-2 rounded">
                                <li>ì‹ ë…„ ì¸ë„¤ì¼ êµì²´ (ëœë”© ë¶„ìœ„ê¸° ì‡„ì‹ )</li>
                                <li>í”„ë¦¬ë¯¸ì—„ íŒ¨í‚¤ì§€ ìƒì„¸ í˜ì´ì§€</li>
                            </ul>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <h4 class="text-sm font-bold text-stone-800">ìš´ì˜ (Operation)</h4>
                            <p class="text-xs text-stone-500 mb-2">1ì›” ~ ì¶”ì„ ì „</p>
                            <ul class="text-xs text-stone-600 list-disc list-inside bg-stone-50 p-2 rounded">
                                <li>ì‹ ë…„ ì„±ê³µë°˜ ìº í˜ì¸ ë¼ì´ë¸Œ</li>
                            </ul>
                        </div>
                    </div>
                    <div class="mt-4 p-3 bg-blue-50 rounded border border-blue-100 text-xs text-blue-700">
                        ğŸ’¡ <strong>ê¸°íƒ€ ì•„ì´ë””ì–´:</strong> ì‹ ë…„ ê°“ìƒ íŒ¨í‚¤ì§€ (ì œíœ´) - ë§í•´ë³´ì¹´, ë¦¬ì–¼í´ë˜ìŠ¤
                    </div>
                </div>
            </section>

            <!-- 4. TODO & CHECKLIST -->
            <section id="todo" class="content-section hidden fade-in">
                <h2 class="text-2xl font-bold mb-6">ì‹¤í–‰ ê³„íš (Action Plan)</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-red-500">
                        <h3 class="font-bold text-lg mb-4 text-red-600">ğŸš¨ í•„ìˆ˜ ë¦¬ìŠ¤í¬ ì²´í¬</h3>
                        <div class="space-y-2">
                            <div class="check-item">
                                <input type="checkbox" id="risk1" class="check-input">
                                <label for="risk1" class="check-label"><strong>[ë²•ë¬´]</strong> 'ë¡œë˜' ìš©ì–´ ë° 500ë§Œì› ì§€ê¸‰ ê´‘ê³  ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸</label>
                            </div>
                            <div class="check-item">
                                <input type="checkbox" id="risk2" class="check-input">
                                <label for="risk2" class="check-label"><strong>[ì½˜í…ì¸ ]</strong> ë¹„ë²•ì„œ: í”¼ì¹´íŒ€ ë¶ˆê°€ â†’ í¬ëª½ ì™¸ì£¼/ìì²´ ì œì‘ ê²°ì •</label>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-stone-500">
                        <h3 class="font-bold text-lg mb-4 text-stone-800">ğŸ—“ï¸ ì „ì²´ ì‹¤í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                        <div class="space-y-2">
                            <div class="check-item">
                                <input type="checkbox" id="task1" class="check-input">
                                <label for="task1" class="check-label"><strong>[12/3~]</strong> 12ì›” ì—°ë§ ìº í˜ì¸ ì‹œì‘ (í• ì¸+ë¡œë˜)</label>
                            </div>
                            <div class="check-item">
                                <input type="checkbox" id="task2" class="check-input">
                                <label for="task2" class="check-label"><strong>[ê°œë°œ]</strong> ì‚¬ì „ ì˜ˆì•½ (1ì›” ì‹œì‘) ê²°ì œ ë¡œì§ êµ¬í˜„</label>
                            </div>
                            <div class="check-item">
                                <input type="checkbox" id="task3" class="check-input">
                                <label for="task3" class="check-label"><strong>[12ì›” ì¤‘]</strong> ì‹ ë…„ ì½˜í…ì¸ (ë¹„ë²•ì„œ) í¬ëª½ ì™¸ì£¼/ì œì‘ ì™„ë£Œ</label>
                            </div>
                            <div class="check-item">
                                <input type="checkbox" id="task4" class="check-input">
                                <label for="task4" class="check-label"><strong>[1ì›” ì´ˆ]</strong> 1ì›” ì‹ ë…„ ìº í˜ì¸ ì „í™˜ (í”„ë¦¬ë¯¸ì—„+ì„±ê³µë°˜)</label>
                            </div>
                            <div class="check-item">
                                <input type="checkbox" id="task5" class="check-input">
                                <label for="task5" class="check-label"><strong>[ìƒì‹œ]</strong> ê´‘ê³  ì†Œì¬(ìµœì €ê°€/í™˜ê¸‰/500ë§Œì›) íš¨ìœ¨ ìµœì í™”</label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 5. âœ¨ AI ASSISTANT (New Feature) -->
            <section id="ai-assistant" class="content-section hidden fade-in">
                <div class="flex items-center gap-3 mb-6">
                    <span class="text-3xl">âœ¨</span>
                    <div>
                        <h2 class="text-2xl font-bold text-purple-700">AI í¬ë¦¬ì—ì´í‹°ë¸Œ ì–´ì‹œìŠ¤í„´íŠ¸</h2>
                        <p class="text-sm text-stone-500">Gemini APIë¥¼ í™œìš©í•´ ì•„ì´ë””ì–´ì™€ ë¦¬ìŠ¤í¬ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì ê²€í•˜ì„¸ìš”.</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Feature 1: AI Ad Copywriter -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                            <span>âœï¸</span> AI ì¹´í”¼ë¼ì´í„°
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">íƒ€ê²Ÿ (Target)</label>
                                <input type="text" id="ad-target" class="w-full p-2 border rounded text-sm" value="2030 ì—¬ì„± ë‹¤ì´ì–´í„°" placeholder="ì˜ˆ: ìƒˆí•´ ìš´ë™ ê²°ì‹¬í•œ ì§ì¥ì¸">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">í•µì‹¬ í˜œíƒ (Key Benefit)</label>
                                <select id="ad-benefit" class="w-full p-2 border rounded text-sm">
                                    <option value="52% í• ì¸ & ìµœì €ê°€">12ì›”: 52% í• ì¸ & ìµœì €ê°€</option>
                                    <option value="ë¡œë˜ 500ë§Œì› ì¦ì •">12ì›”: ë¡œë˜ 500ë§Œì› ì¦ì •</option>
                                    <option value="100% ë¬´ì¡°ê±´ í™˜ê¸‰">100% ë¬´ì¡°ê±´ í™˜ê¸‰</option>
                                    <option value="ì €ì†ë…¸í™” ë¹„ë²•ì„œ ì¦ì •">1ì›”: ì €ì†ë…¸í™” ë¹„ë²•ì„œ ì¦ì •</option>
                                </select>
                            </div>
                            <button onclick="generateAdCopy()" class="w-full py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors flex justify-center items-center gap-2">
                                <span>ì•„ì´ë””ì–´ ìƒì„±í•˜ê¸°</span>
                            </button>
                            
                            <!-- Output Area -->
                            <div id="ad-output" class="bg-purple-50 p-4 rounded-lg min-h-[100px] text-sm text-stone-700">
                                <span class="text-stone-400">ì—¬ê¸°ì— AIê°€ ì œì•ˆí•œ ì¹´í”¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</span>
                            </div>
                            <!-- Save Button -->
                            <button onclick="saveIdea('ad')" id="save-ad-btn" class="w-full py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors hidden text-xs">
                                ğŸ’¾ ì´ ì•„ì´ë””ì–´ ì €ì¥í•˜ê¸°
                            </button>
                        </div>
                    </div>

                    <!-- Feature 2: AI Risk Checker -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                        <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                            <span>âš–ï¸</span> AI ë¦¬ìŠ¤í¬ ë²•ë¬´íŒ€ (Beta)
                        </h3>
                        <div class="space-y-4">
                            <div class="bg-orange-50 p-3 rounded text-xs text-orange-800 mb-2">
                                âš ï¸ ì‹¤ì œ ë²•ë¥  ìë¬¸ì´ ì•„ë‹ˆë©°, ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™œìš©í•˜ì„¸ìš”.
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">ê²€í† í•  ë¬¸êµ¬/ê¸°íšì•ˆ</label>
                                <textarea id="risk-text" class="w-full p-2 border rounded text-sm h-24" placeholder="ì˜ˆ: ë‹¤ì´ì–´íŠ¸ ë¡œë˜ ì´ë²¤íŠ¸, 1ë“±ì—ê²Œ 500ë§Œì› í˜„ê¸ˆ ì§€ê¸‰! ê½ì´ì–´ë„ 100% í™˜ê¸‰í•´ ë“œë¦½ë‹ˆë‹¤."></textarea>
                            </div>
                            <button onclick="checkRisk()" class="w-full py-2 bg-stone-800 text-white rounded hover:bg-stone-700 transition-colors">
                                <span>ë¦¬ìŠ¤í¬ ë¶„ì„í•˜ê¸°</span>
                            </button>

                            <!-- Output Area -->
                            <div id="risk-output" class="bg-stone-50 p-4 rounded-lg min-h-[100px] text-sm text-stone-700">
                                <span class="text-stone-400">AIê°€ ì ì¬ì  ë¬¸ì œì ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤.</span>
                            </div>
                            <!-- Save Button -->
                            <button onclick="saveIdea('risk')" id="save-risk-btn" class="w-full py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors hidden text-xs">
                                ğŸ’¾ ì´ ë¶„ì„ ì €ì¥í•˜ê¸°
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Saved Ideas Section -->
                <div class="mt-8 bg-white p-6 rounded-xl shadow-sm border border-stone-200">
                    <h3 class="font-bold text-lg mb-4 flex items-center gap-2">
                        <span>ğŸ’¾</span> ì €ì¥ëœ ì•„ì´ë””ì–´ (Saved Ideas)
                    </h3>
                    <div id="saved-list" class="space-y-3 text-sm text-stone-600">
                        <p class="text-stone-400">ì•„ì§ ì €ì¥ëœ ì•„ì´ë””ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        // API Configuration
        const apiKey = ""; // System will provide this key

        // State Management
        const state = {
            currentSection: 'dashboard',
            decemberAds: [
                { type: 'discount', title: 'í• ì¸ ì†Œêµ¬', text: "2024ë…„ ë§ˆì§€ë§‰ ìµœì €ê°€! (52% OFF)", icon: "ğŸ“‰", color: "bg-orange-100 text-orange-700" },
                { type: 'lotto', title: 'ë¡œë˜/ë³´ìƒ', text: "ë‹¤ì´ì–´íŠ¸ 500ë§Œì›ì˜ ì£¼ì¸ê³µì€?", icon: "ğŸ°", color: "bg-yellow-100 text-yellow-700" },
                { type: 'refund', title: 'í™˜ê¸‰ ì†Œêµ¬', text: "ëª» ë¹¼ë„ ê·¸ëƒ¥ í™˜ê¸‰í•´ ë“œë¦½ë‹ˆë‹¤. ìš´ë™ë§Œ í•˜ì„¸ìš”.", icon: "ğŸ’¸", color: "bg-emerald-100 text-emerald-700" },
                { type: 'refund', title: 'í™˜ê¸‰ ì†Œêµ¬', text: "ì‚´ ì•ˆ ë¹ ì ¸ë„ 100% í™˜ê¸‰, ë¹ ì ¸ë„ 100% í™˜ê¸‰", icon: "ğŸ›¡ï¸", color: "bg-emerald-100 text-emerald-700" },
                { type: 'timing', title: 'ì‹œê¸° ì†Œêµ¬', text: "ìµœì €ê°€ì¼ ë•Œ êµ¬ë§¤í•˜ê³  ìš´ë™ì€ 1ì›”ë¶€í„°!", icon: "â±ï¸", color: "bg-blue-100 text-blue-700" },
            ],
            januaryAds: [
                { type: 'newyear', title: 'ì‹ ë…„ ë‹¤ì§', text: "ë‹¤ì´ì–´íŠ¸ ê¼­ ì„±ê³µí•  ìˆ˜ ìˆë„ë¡ ë‹¤ ì¤€ë¹„í–ˆì–´", icon: "ğŸ¯", color: "bg-blue-100 text-blue-700" },
                { type: 'newyear', title: 'ì‹ ë…„ ë‹¤ì§', text: "ì‹ ë…„í˜œíƒ ì„±ê³µë°˜ ëª¨ì§‘", icon: "ğŸ™Œ", color: "bg-blue-100 text-blue-700" },
                { type: 'premium', title: 'í”„ë¦¬ë¯¸ì—„', text: "ì €ì†ë…¸í™” ë¹„ë²•ì„œ ì¦ì • (ìƒˆí•´ í•œ ì‚´ ë” ë¨¹ê¸° ì‹«ë‹¤ë©´?)", icon: "ğŸ“š", color: "bg-purple-100 text-purple-700" },
                { type: 'collab', title: 'ì œíœ´', text: "ì‹ ë…„ ê°“ìƒ íŒ¨í‚¤ì§€ (ë§í•´ë³´ì¹´/ë¦¬ì–¼í´ë˜ìŠ¤ ì œíœ´)", icon: "ğŸ¤", color: "bg-green-100 text-green-700" },
            ]
        };

        // Navigation Logic
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('nav-active');
                // Reset AI button style if needed
                if(btn.id === 'nav-ai-assistant') {
                    btn.classList.remove('ring-2', 'ring-purple-300');
                }
            });
            
            const activeBtn = document.getElementById(`nav-${sectionId}`);
            activeBtn.classList.add('nav-active');
            if(sectionId === 'ai-assistant') {
                activeBtn.classList.add('ring-2', 'ring-purple-300');
                loadSavedIdeas(); // Load saved ideas when entering the tab
            }

            if(sectionId === 'december' && window.priceChart) {
                setTimeout(() => window.priceChart.update(), 100);
            }
        }

        // Ad Filtering Logic
        function renderAds(campaign, filterType) {
            const containerId = campaign === 'december' ? 'ad-grid-december' : 'ad-grid-january';
            const container = document.getElementById(containerId);
            if(!container) return;
            
            container.innerHTML = '';
            
            const adsData = campaign === 'december' ? state.decemberAds : state.januaryAds;
            const filtered = filterType === 'all' 
                ? adsData 
                : adsData.filter(ad => ad.type === filterType);

            if (filtered.length === 0) {
                container.innerHTML = `<div class="col-span-2 text-center text-stone-400 py-4">í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ì†Œì¬ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            filtered.forEach(ad => {
                const div = document.createElement('div');
                div.className = "p-4 border border-stone-200 rounded-lg bg-stone-50 hover:bg-white hover:border-orange-200 transition-all cursor-default shadow-sm";
                
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-3">
                        <span class="text-xs px-2 py-1 rounded font-bold ${ad.color}">${ad.title}</span>
                        <span class="text-lg">${ad.icon}</span>
                    </div>
                    <p class="text-sm font-medium text-stone-800 leading-snug">"${ad.text}"</p>
                `;
                container.appendChild(div);
            });
        }

        function filterAds(campaign, type) {
            // Update UI buttons for the specific campaign
            const btnClass = campaign === 'december' ? '.december-filter-btn' : '.january-filter-btn';
            
            document.querySelectorAll(btnClass).forEach(btn => {
                if(btn.dataset.filter === type) {
                    btn.classList.add('bg-stone-200', 'font-bold');
                    btn.classList.remove('bg-white');
                } else {
                    btn.classList.remove('bg-stone-200', 'font-bold');
                    btn.classList.add('bg-white');
                }
            });
            renderAds(campaign, type);
        }

        // Gemini API Helper Function
        async function callGeminiAPI(prompt) {
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const maxRetries = 5;
            let retryCount = 0;
            let delay = 1000;

            while (retryCount <= maxRetries) {
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: prompt }]
                            }]
                        })
                    });

                    if (!response.ok) {
                        // Handle specific error codes if needed, but for now retry on all non-ok
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    return data.candidates[0].content.parts[0].text;
                } catch (error) {
                    if (retryCount === maxRetries) {
                        console.error("Error calling Gemini API after retries:", error);
                        return "ì£„ì†¡í•©ë‹ˆë‹¤. AI ì‘ë‹µì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”)";
                    }
                    
                    // Wait for delay
                    await new Promise(resolve => setTimeout(resolve, delay));
                    
                    // Exponential backoff
                    delay *= 2;
                    retryCount++;
                }
            }
        }

        // Feature 1: Generate Ad Copy
        async function generateAdCopy() {
            const target = document.getElementById('ad-target').value;
            const benefit = document.getElementById('ad-benefit').value;
            const outputDiv = document.getElementById('ad-output');
            const saveBtn = document.getElementById('save-ad-btn');

            // Show Loading State
            outputDiv.innerHTML = '<div class="flex justify-center py-4"><div class="dot-flashing"></div></div>';
            saveBtn.classList.add('hidden');

            const prompt = `
                ì—­í• : ì „ë¬¸ ë§ˆì¼€íŒ… ì¹´í”¼ë¼ì´í„°.
                ìƒí™©: í•„ë¼í…ŒìŠ¤/ìš´ë™ ì•± í”„ë¡œëª¨ì…˜ ê´‘ê³  ë¬¸êµ¬ë¥¼ ì‘ì„±í•´ì•¼ í•¨.
                íƒ€ê²Ÿ: ${target}
                í•µì‹¬ í˜œíƒ: ${benefit}
                
                ìš”ì²­: ìœ„ íƒ€ê²Ÿê³¼ í˜œíƒì„ ë°”íƒ•ìœ¼ë¡œ í´ë¦­ë¥ (CTR)ì„ ë†’ì¼ ìˆ˜ ìˆëŠ” ë§¤ë ¥ì ì¸ ê´‘ê³  ì¹´í”¼ 3ê°€ì§€ë¥¼ ì‘ì„±í•´ì¤˜.
                í˜•ì‹:
                1. [í—¤ë“œë¼ì¸]
                   - ì„¤ëª…
                2. [í—¤ë“œë¼ì¸]
                   - ì„¤ëª…
                3. [í—¤ë“œë¼ì¸]
                   - ì„¤ëª…
                
                ì–´ì¡°: ìœ„íŠ¸ìˆê³ , í›„í‚¹í•˜ë©°, ì„¤ë“ë ¥ ìˆê²Œ. ì´ëª¨ì§€ ì ì ˆíˆ ì‚¬ìš©.
            `;

            const result = await callGeminiAPI(prompt);
            outputDiv.innerHTML = marked.parse(result);
            saveBtn.classList.remove('hidden');
        }

        // Feature 2: Risk Check
        async function checkRisk() {
            const text = document.getElementById('risk-text').value;
            const outputDiv = document.getElementById('risk-output');
            const saveBtn = document.getElementById('save-risk-btn');

            if (!text.trim()) {
                outputDiv.innerHTML = '<span class="text-red-500">ê²€í† í•  ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>';
                return;
            }

            // Show Loading State
            outputDiv.innerHTML = '<div class="flex justify-center py-4"><div class="dot-flashing"></div></div>';
            saveBtn.classList.add('hidden');

            const prompt = `
                ì—­í• : ë§ˆì¼€íŒ… ë²•ë¬´ ë¦¬ìŠ¤í¬ ê²€í†  ì „ë¬¸ê°€.
                ìƒí™©: í•œêµ­ì˜ ìš´ë™ ì•± í”„ë¡œëª¨ì…˜ ê¸°íšì•ˆì„ ê²€í†  ì¤‘.
                ê²€í†  ë‚´ìš©: "${text}"
                
                ìš”ì²­: ìœ„ ë‚´ìš©ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë²•ì  ë¬¸ì œ(ì‚¬í–‰ì„± ì¡°ì¥, ê³¼ì¥ ê´‘ê³ , í‘œì‹œê´‘ê³ ë²• ìœ„ë°˜ ë“±)ë‚˜ ì†Œë¹„ì ì˜¤í•´ ì†Œì§€ê°€ ìˆëŠ” ë¶€ë¶„ì„ 3ê°€ì§€ í¬ì¸íŠ¸ë¡œ ì§€ì í•˜ê³ , ì•ˆì „í•˜ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” ëŒ€ì•ˆì„ ì œì‹œí•´ì¤˜.
                
                ì£¼ì˜: "ë²•ì ì¸ ì¡°ì–¸ì´ ì•„ë‹˜"ì„ ëª…ì‹œí•  ê²ƒ.
                ì–´ì¡°: ëƒ‰ì² í•˜ê³  ë¶„ì„ì ìœ¼ë¡œ.
            `;

            const result = await callGeminiAPI(prompt);
            outputDiv.innerHTML = marked.parse(result);
            saveBtn.classList.remove('hidden');
        }

        // Local Storage Functions
        function saveIdea(type) {
            const outputDiv = type === 'ad' ? document.getElementById('ad-output') : document.getElementById('risk-output');
            const content = outputDiv.innerHTML;
            const date = new Date().toLocaleString();
            const title = type === 'ad' ? `ğŸ“ ì¹´í”¼ ì•„ì´ë””ì–´ (${date})` : `âš–ï¸ ë¦¬ìŠ¤í¬ ë¶„ì„ (${date})`;

            const idea = { title, content, id: Date.now() };
            
            let savedIdeas = JSON.parse(localStorage.getItem('kwama_ideas')) || [];
            savedIdeas.unshift(idea); // Add to top
            localStorage.setItem('kwama_ideas', JSON.stringify(savedIdeas));
            
            loadSavedIdeas();
            alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function loadSavedIdeas() {
            const listContainer = document.getElementById('saved-list');
            const savedIdeas = JSON.parse(localStorage.getItem('kwama_ideas')) || [];

            if (savedIdeas.length === 0) {
                listContainer.innerHTML = '<p class="text-stone-400">ì•„ì§ ì €ì¥ëœ ì•„ì´ë””ì–´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            listContainer.innerHTML = '';
            savedIdeas.forEach(idea => {
                const div = document.createElement('div');
                div.className = "bg-stone-50 p-3 rounded border border-stone-200 relative group";
                div.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <strong class="text-stone-700 text-xs">${idea.title}</strong>
                        <button onclick="deleteIdea(${idea.id})" class="text-red-400 hover:text-red-600 text-xs">ì‚­ì œ</button>
                    </div>
                    <div class="text-xs text-stone-600 overflow-hidden max-h-24 group-hover:max-h-full transition-all duration-300">
                        ${idea.content}
                    </div>
                `;
                listContainer.appendChild(div);
            });
        }

        function deleteIdea(id) {
            if(!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            let savedIdeas = JSON.parse(localStorage.getItem('kwama_ideas')) || [];
            savedIdeas = savedIdeas.filter(idea => idea.id !== id);
            localStorage.setItem('kwama_ideas', JSON.stringify(savedIdeas));
            loadSavedIdeas();
        }

        // Initialize Chart
        document.addEventListener('DOMContentLoaded', () => {
            const ctx = document.getElementById('priceChart').getContext('2d');
            window.priceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['ì›ê°€', '12ì›” ì–¼ë¦¬ë²„ë“œ(52%â†“)', '1ì›” ì‹ ë…„ë°˜'],
                    datasets: [{
                        label: 'ê°€ê²© ì§€ìˆ˜',
                        data: [100, 52, 48],
                        backgroundColor: ['#d6d3d1', '#fb923c', '#d6d3d1'], 
                        borderRadius: 4,
                        barThickness: 30
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: false },
                        title: { display: true, text: 'ì‹œê¸°ë³„ ê°€ê²© ë¹„êµ' }
                    },
                    scales: { y: { display: false }, x: { grid: { display: false } } }
                }
            });

            // Initial Render of Ads for both campaigns
            renderAds('december', 'all');
            renderAds('january', 'all');
        });
    </script>
</body>
</html>